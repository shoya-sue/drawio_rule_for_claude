<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" agent="Claude" version="26.0.0">
  <diagram name="コンテキスト図" id="context-template">
    <mxGraphModel dx="0" dy="0" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="827" pageHeight="1169" background="none" defaultFontFamily="Helvetica">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- 1. 凡例グループ（最背面） -->
        <mxCell id="legend" value="凡例" style="swimlane;horizontal=1;startSize=25;fillColor=#f5f5f5;strokeColor=#666666;fontFamily=Helvetica;fontSize=14;fontStyle=1;fontColor=#333333;collapsible=0;" vertex="1" parent="1">
          <mxGeometry x="500" y="40" width="160" height="120" as="geometry" />
        </mxCell>
        <mxCell id="legend-sys-box" value="" style="ellipse;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=Helvetica;fontSize=14;fontColor=#333333;" vertex="1" parent="legend">
          <mxGeometry x="10" y="35" width="25" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-sys-text" value="対象システム" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=14;fontColor=#333333;" vertex="1" parent="legend">
          <mxGeometry x="45" y="35" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-ext-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Helvetica;fontSize=14;fontColor=#333333;" vertex="1" parent="legend">
          <mxGeometry x="10" y="60" width="25" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-ext-text" value="外部エンティティ" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=14;fontColor=#333333;" vertex="1" parent="legend">
          <mxGeometry x="45" y="60" width="110" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-flow-box" value="" style="endArrow=classic;html=1;strokeWidth=2;strokeColor=#333333;" vertex="1" parent="legend">
          <mxGeometry x="10" y="95" width="25" height="1" as="geometry">
            <mxPoint x="10" y="95" as="sourcePoint" />
            <mxPoint x="35" y="95" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="legend-flow-text" value="データフロー" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontFamily=Helvetica;fontSize=14;fontColor=#333333;" vertex="1" parent="legend">
          <mxGeometry x="45" y="85" width="100" height="20" as="geometry" />
        </mxCell>

        <!-- 2. 図形（vertex） -->
        <!-- 中央: 対象システム -->
        <mxCell id="system" value="ECサイト&#xa;システム" style="ellipse;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontFamily=Helvetica;fontSize=18;fontStyle=1;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="200" y="160" width="160" height="100" as="geometry" />
        </mxCell>

        <!-- 外部エンティティ: 顧客 -->
        <mxCell id="entity-customer" value="顧客" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontFamily=Helvetica;fontSize=18;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="40" y="60" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- 外部エンティティ: 在庫管理システム -->
        <mxCell id="entity-inventory" value="在庫管理&#xa;システム" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontFamily=Helvetica;fontSize=18;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="420" y="60" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- 外部エンティティ: 決済システム -->
        <mxCell id="entity-payment" value="決済&#xa;システム" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontFamily=Helvetica;fontSize=18;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="420" y="260" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- 外部エンティティ: 管理者 -->
        <mxCell id="entity-admin" value="管理者" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontFamily=Helvetica;fontSize=18;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="40" y="260" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- 3. 矢印（edge）を最後に記述 → 最前面 -->
        <!-- 顧客 → システム -->
        <mxCell id="flow-1" value="注文情報" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#333333;fontFamily=Helvetica;fontSize=12;fontColor=#666666;endArrow=classic;endFill=1;" edge="1" parent="1" source="entity-customer" target="system">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- システム → 顧客 -->
        <mxCell id="flow-2" value="注文確認" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#333333;fontFamily=Helvetica;fontSize=12;fontColor=#666666;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="system" target="entity-customer">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="170" y="210" />
              <mxPoint x="170" y="90" />
            </Array>
          </mxGeometry>
        </mxCell>
        <!-- システム → 在庫管理 -->
        <mxCell id="flow-3" value="在庫照会" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#333333;fontFamily=Helvetica;fontSize=12;fontColor=#666666;endArrow=classic;endFill=1;" edge="1" parent="1" source="system" target="entity-inventory">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- 在庫管理 → システム -->
        <mxCell id="flow-4" value="在庫情報" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#333333;fontFamily=Helvetica;fontSize=12;fontColor=#666666;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="entity-inventory" target="system">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="390" y="90" />
              <mxPoint x="390" y="180" />
            </Array>
          </mxGeometry>
        </mxCell>
        <!-- システム → 決済システム -->
        <mxCell id="flow-5" value="決済要求" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#333333;fontFamily=Helvetica;fontSize=12;fontColor=#666666;endArrow=classic;endFill=1;" edge="1" parent="1" source="system" target="entity-payment">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- 決済システム → システム -->
        <mxCell id="flow-6" value="決済結果" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#333333;fontFamily=Helvetica;fontSize=12;fontColor=#666666;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="entity-payment" target="system">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="390" y="290" />
              <mxPoint x="390" y="240" />
            </Array>
          </mxGeometry>
        </mxCell>
        <!-- 管理者 → システム -->
        <mxCell id="flow-7" value="商品登録" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#333333;fontFamily=Helvetica;fontSize=12;fontColor=#666666;endArrow=classic;endFill=1;" edge="1" parent="1" source="entity-admin" target="system">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <!-- システム → 管理者 -->
        <mxCell id="flow-8" value="レポート" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#333333;fontFamily=Helvetica;fontSize=12;fontColor=#666666;endArrow=classic;endFill=1;dashed=1;" edge="1" parent="1" source="system" target="entity-admin">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="170" y="230" />
              <mxPoint x="170" y="290" />
            </Array>
          </mxGeometry>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
